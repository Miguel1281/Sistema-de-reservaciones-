== Diagramas de interfaces

=== Interfaces de sistema

==== CU1-IHacerReserva
image::Interface diagrams/CU1-IHacerReserva.jpg[IHacerReserva, width=600, align=center]
Especificación de Interfaz: IHacerReserva

Descripción: Interfaz provista por el componente SistemaReservas. Permite a un huésped iniciar el proceso de bloqueo de inventario y confirmar la compra.

Operación: crearReservaPendiente

Firma:
----
crearReservaPendiente(solicitud: SolicitudReserva): ResumenReserva
----

Pre-condiciones:

* La fechaLlegada debe ser mayor o igual a la fecha actual del sistema.
* La fechaSalida debe ser posterior a la fechaLlegada.
* Debe existir disponibilidad de inventario para el idTipoHabitacion en el idHotel solicitado para el rango de fechas indicado (validado contra ICatalogoMgt).

Pos-condiciones:

* Se crea una nueva instancia de Reserva en el sistema con estado PENDIENTE.
* Se decrementa temporalmente el inventario disponible (bloqueo suave) por el tiempo definido en expiracionRetencion.
* Se retorna un objeto ResumenReserva que incluye el costo total calculado y la fecha/hora límite para confirmar el pago.

---

Operación: confirmarReserva

Firma:
----
confirmarReserva(idReserva: int, tokenPago: String): ComprobanteReserva
----

Pre-condiciones:

* Debe existir una reserva con el idReserva proporcionado.
* El estado actual de la reserva debe ser PENDIENTE.
* La fecha/hora actual no debe haber superado la expiracionRetencion establecida previamente.
* El tokenPago debe ser válido y la transacción financiera debe haber sido aprobada (validado contra IPagosMgt).

Pos-condiciones:

* El estado de la reserva cambia a CONFIRMADA.
* El bloqueo de inventario se hace permanente.
* Se genera y retorna un ComprobanteReserva con un codigoConfirmacion único y el idTransaccion asociado.

---

==== CU2-IRealizarPagoReserva
image::Interface diagrams/CU2-IRealizarPagoReserva.jpg[IRealizarPagoReserva, width=600, align=center]
Especificación de Interfaz: IRealizarPagoReserva

Descripción: Interfaz provista por el componente SistemaPagos. Encapsula la lógica de comunicación con la pasarela bancaria y el procesamiento seguro de transacciones financieras.

Operación: procesarPago

Firma:
----
procesarPago(solicitud: SolicitudEjecucionPago): ConfirmacionPago
----

Pre-condiciones:

* El idReserva contenido en la solicitud debe corresponder a una reserva existente en el sistema.
* El monto debe ser mayor a cero y coincidir con el saldo pendiente o el depósito requerido.
* Los DetallesMetodoPago deben ser sintácticamente válidos (ej. la fechaExpiracion debe ser futura, el numeroTarjetaEncriptada debe cumplir el algoritmo de validación).

Pos-condiciones:

* Se genera un intento de transacción en la pasarela de pagos externa.
* Se crea una instancia de ConfirmacionPago con la marcaTiempo actual.
* Si la pasarela aprueba el cargo, el atributo estado será APROBADO y se generará un codigoAutorizacion.
* Si la pasarela rechaza el cargo (fondos insuficientes, fraude), el atributo estado será RECHAZADO.

---

Operación: obtenerEstadoPago

Firma:
----
obtenerEstadoPago(idReserva: int): EstadoTransaccion
----

Pre-condiciones:

* Debe existir al menos un intento de pago registrado asociado al idReserva.

Pos-condiciones:

* Retorna el valor actual de la enumeración EstadoTransaccion correspondiente al último intento de pago realizado para esa reserva (no modifica ningún dato, es una operación de consulta segura/idempotente).

---

==== CU3-IConsultarDisponibilidad
image::Interface diagrams/CU3-IConsultarDisponibilidad.jpg[IConsultarDisponibilidad, width=600, align=center]
Especificación de Interfaz: IConsultarDisponibilidad

Descripción: Interfaz provista por el componente SistemaReservas. Permite a los usuarios explorar el catálogo, ver detalles de alojamiento y verificar disponibilidad en tiempo real antes de iniciar una reserva.

Operación: buscarHoteles

Firma:
----
buscarHoteles(filtro: CriterioUbicacion): ResumenHotel[]
----

Pre-condiciones:

* El objeto filtro no debe ser nulo.
* Al menos uno de los atributos de búsqueda (ciudad o pais) debe contener una cadena de texto no vacía.

Pos-condiciones:

* Retorna una colección de objetos ResumenHotel que coinciden parcialmente o totalmente con los criterios de ubicación.
* Si no hay coincidencias, retorna una lista vacía (no debe retornar error/null).

---

Operación: obtenerHabitacionesHotel

Firma:
----
obtenerHabitacionesHotel(idHotel: String): DetalleHabitacion[]
----

Pre-condiciones:

* El idHotel proporcionado debe corresponder a un hotel activo en el ICatalogoMgt.

Pos-condiciones:

* Retorna la lista completa de tipos de habitación asociados a ese hotel.
* La información retornada (DetalleHabitacion) incluye datos descriptivos estáticos (fotos, descripción, capacidad) y la tarifaBase referencial (no la final, ya que esa depende de las fechas).

---

Operación: validarSeleccionFechas

Firma:
----
validarSeleccionFechas(solicitud: SolicitudFechas): DisponibilidadCalculada
----

Pre-condiciones:

* fechaLlegada debe ser igual o posterior a la fecha actual.
* fechaSalida debe ser estrictamente posterior a fechaLlegada.
* idTipoHabitacion debe existir en el catálogo.
* cantidadHabitaciones debe ser mayor a 0.

Pos-condiciones:

* Se consulta el inventario dinámico en ICatalogoMgt para cada noche del rango.
* Si hay inventario suficiente para todas las noches:
** estaDisponible es TRUE.
** tarifaTotalCalculada contiene la suma de los precios de cada noche (aplicando temporadas si las hubiera).
* Si falta inventario en al menos una noche:
** estaDisponible es FALSE.
** mensajeAviso indica la causa (ej. "Sin disponibilidad para la noche del 15/Oct").

---

==== CU4-ICancelarReserva
image::Interface diagrams/CU4-ICancelarReserva.jpg[ICancelarReserva, width=600, align=center]
Especificación de Interfaz: ICancelarReserva

Descripción: Interfaz provista por el componente SistemaReservas. Gestiona el ciclo de vida de la terminación anticipada de un contrato de hospedaje, calculando penalizaciones según políticas vigentes y procesando devoluciones.

Operación: cotizarCancelacion

Firma:
----
cotizarCancelacion(idReserva: int): ResumenPenalizacion
----

Pre-condiciones:

* El idReserva debe existir y su estado actual debe ser CONFIRMADA o PENDIENTE.
* La fecha actual no debe ser posterior a la fecha de Check-out de la reserva.

Pos-condiciones:

* Se consulta la PoliticaCancelacion asociada al hotel y tarifa en ICatalogoMgt.
* Se calculan los montos matemáticos (Pagado - Penalización = Reembolso).
* Se genera un tokenValidacion temporal (con tiempo de vida corto) que vincula este cálculo específico con la reserva.
* No se altera el estado de la reserva ni del inventario en este paso.

---

Operación: confirmarCancelacion

Firma:
----
confirmarCancelacion(idReserva: int, tokenValidacion: String): ReciboCancelacion
----

Pre-condiciones:

* El tokenValidacion debe coincidir con el generado en la cotización previa y no debe haber expirado.
* La reserva no debe haber sufrido cambios de estado desde la cotización.

Pos-condiciones:

* El estado de la reserva cambia definitivamente a CANCELADA.
* Se libera el inventario (habitaciones) en ICatalogoMgt para que pueda ser vendido a otros.
* Si corresponde reembolso (montoAReembolsar > 0), se envía una orden de devolución a IPagosMgt y se obtiene el idTransaccionReembolso.
* Se retorna el ReciboCancelacion como prueba legal de la operación.

---

==== CU5-IConsultarReservaCuenta
image::Interface diagrams/CU5-IConsultarReservaCuenta.jpg[IConsultarReservaCuenta, width=600, align=center]
Especificación de Interfaz: IConsultarReservaCuenta

Descripción: Interfaz provista por el componente SistemaReservas. Permite a los usuarios autenticados acceder a su historial de transacciones, verificando estados actuales y desgloses financieros de sus estancias pasadas, presentes o futuras.

Operación: obtenerMisReservas

Firma:
----
obtenerMisReservas(idUsuario: int): ResumenReserva[]
----

Pre-condiciones:

* El idUsuario debe corresponder a una cuenta activa en el sistema (IClienteMgt).
* El usuario debe estar autenticado en la sesión actual.

Pos-condiciones:

* Retorna una colección de objetos ResumenReserva asociados a ese usuario.
* La lista se ordena por defecto cronológicamente (de la más reciente a la más antigua).
* Si el usuario no tiene historial, retorna una lista vacía (no null).

---

Operación: verDetallesReserva

Firma:
----
verDetallesReserva(idReserva: int): DetalleReservaCompleto
----

Pre-condiciones:

* El idReserva debe existir en el repositorio de reservas.
* (Seguridad) La reserva debe pertenecer al usuario que realiza la consulta (o a un administrador autorizado).

Pos-condiciones:

* Retorna un objeto DetalleReservaCompleto con toda la información extendida.
* Se calcula y retorna el desglose financiero actualizado en la lista de ItemFactura (incluyendo cargos extras consumidos hasta el momento si la reserva está activa).

---

==== CU6-IModificarPeriodoEstancia
image::Interface diagrams/CU6-IModificarPeriodoEstancia.jpg[IModificarPeriodoEstancia, width=600, align=center]
Especificación de Interfaz: IModificarPeriodoEstancia

Descripción: Interfaz provista por el componente SistemaReservas. Permite alterar la duración de una estancia ya reservada, gestionando la disponibilidad del nuevo periodo y los ajustes financieros correspondientes (cargos adicionales o reembolsos) sin cancelar la reserva original.

Operación: cotizarNuevasFechas

Firma:
----
cotizarNuevasFechas(idReservas: int, nuevasFechas: RangoFechas): CotizacionCambio
----

Pre-condiciones:

* El idReserva debe existir y estar en estado CONFIRMADA.
* La fecha de check-in original no debe haber pasado (no se pueden modificar fechas de reservas ya iniciadas o pasadas).
* El objeto nuevasFechas debe contener un rango válido y futuro.

Pos-condiciones:

* Se verifica disponibilidad en ICatalogoMgt para el nuevo rango.
* Si hay disponibilidad:
** esPosible es TRUE.
** Se calcula la diferenciaPrecio (Precio Nuevo - Precio Viejo).
** Se determina el accionFinanciera (ej. si diferencia > 0 $\rightarrow$ COBRO_ADICIONAL).
** Se genera un tokenCotizacion temporal.
* Si no hay disponibilidad:
** esPosible es FALSE.
** tokenCotizacion es nulo.
* No se modifica la reserva original todavía.

---

Operación: confirmarModificacion

Firma:
----
confirmarModificacion(idReserva: int, tokenCotizacion: String): ConfirmacionCambio
----

Pre-condiciones:

* El tokenCotizacion debe ser válido, coincidir con la reserva y no haber expirado (el inventario consultado en la cotización debe seguir disponible).
* Si la accionFinanciera requería cobro, el pago debe haber sido autorizado previamente o en este instante (vía colaboración con SistemaPagos).

Pos-condiciones:

* Se actualizan las fechas de entrada/salida en la entidad Reserva.
* Se actualiza el bloqueo de inventario en ICatalogoMgt (liberando los días que ya no se usan y tomando los nuevos).
* Se registra la transacción financiera de ajuste.
* Se retorna ConfirmacionCambio con los datos actualizados.

---

==== CU7-IModificarTipoHabitacion
image::Interface diagrams/CU7-IModificarTipoHabitacion.jpg[IModificarTipoHabitacion, width=600, align=center]
Especificación de Interfaz: IModificarTipoHabitacion

Descripción: Interfaz provista por el componente SistemaReservas. Permite realizar cambios en la categoría de alojamiento (Upgrades/Downgrades) de una reserva confirmada, gestionando inventarios temporales y ajustes de tarifas.

Operación: obtenerAlternativasDisponibles

Firma:
----
obtenerAlternativasDisponibles(idReserva: int): OpcionMejora[]
----

Pre-condiciones:

* El idReserva debe existir y corresponder a una reserva activa (CONFIRMADA) que aún no ha realizado Check-in.

Pos-condiciones:

* Consulta ICatalogoMgt usando las fechas originales de la reserva.
* Retorna una lista de tipos de habitación que tienen disponibilidad completa para esas fechas, excluyendo el tipo actual.
* Calcula la diferencia de precio para cada opción.

---

Operación: bloquearYCotizarCambio

Firma:
----
bloquearYCotizarCambio(idReserva: int, idNuevoTipo: String): CotizacionActualizada
----

Pre-condiciones:

* El idNuevoTipo debe ser uno de los retornados previamente como disponible.

Pos-condiciones:

* Realiza un bloqueo temporal ("Soft Hold") en el inventario del nuevo tipo de habitación.
* Retorna un objeto CotizacionActualizada con un tokenBloqueo único y un tiempo de expiración (ej. 5 minutos).
* Define el monto exacto a pagar o reembolsar.

---

Operación: confirmarCambio

Firma:
----
confirmarCambio(tokenBloqueo: String): ResultadoCambio
----

Pre-condiciones:

* El tokenBloqueo debe ser válido y no haber expirado.
* Si hay saldo pendiente, el pago debe haber sido autorizado (colaboración implícita con SistemaPagos).

Pos-condiciones:

* Convierte el bloqueo temporal en permanente.
* Libera el inventario de la habitación anterior (la devuelve al pool disponible).
* Actualiza la referencia de idTipoHabitacion en la entidad Reserva.
* Retorna ResultadoCambio con cambioExitoso = TRUE.

---

==== CU8-ICheckIn
image::Interface diagrams/CU8-ICheckIn.jpg[ICheckIn, width=600, align=center]
Especificación de Interfaz: ICheckIn

Descripción: Interfaz provista por el componente SistemaRecepcion. Facilita al personal de front-desk la localización de reservas previstas para el día actual y la ejecución del proceso de entrada, incluyendo la asignación final de habitación y validación de saldos.

Operación: buscarReservasDelDia

Firma:
----
buscarReservasDelDia(criterio: CriterioBusqueda): ResumenRecepcion
----

Pre-condiciones:

* El sistema debe tener acceso operativo a IReservaMgt.
* El objeto criterio debe contener al menos un parámetro de búsqueda no nulo (ej. idReserva o apellidoHuesped).

Pos-condiciones:

* Retorna un objeto (o colección) ResumenRecepcion con las reservas cuya fechaLlegada coincide con la fecha actual del sistema.
* Incluye información crítica para la decisión del recepcionista: estado del pago (PAGADO/PENDIENTE) y estado de la reserva (CONFIRMADA).
* Si no se encuentran coincidencias, retorna nulo o una lista vacía.

---

Operación: registrarCheckIn

Firma:
----
registrarCheckIn(idReserva: int): ConfirmacionIngreso
----

Pre-condiciones:

* La reserva identificada por idReserva debe existir y tener fecha de llegada igual a la fecha actual.
* El estado de la reserva debe ser CONFIRMADA.
* El saldo pendiente debe ser cero (o estar dentro del límite de crédito autorizado según la política del hotel).
* Debe existir una habitación física disponible y limpia (estadoFisico = LIMPIA) del tipo reservado en ICatalogoMgt.

Pos-condiciones:

* El estado de la reserva cambia a EN_CASA (Check-In completado).
* Se asigna un número de habitación físico específico a la estancia.
* Se cambia el estado de la habitación física a OCUPADA en el catálogo.
* Se genera y retorna un objeto ConfirmacionIngreso con la fecha/hora exacta de entrada.

---

==== CU9-ICheckOut
image::Interface diagrams/CU9-ICheckOut.jpg[ICheckOut, width=600, align=center]
Especificación de Interfaz: ICheckOut

Descripción: Interfaz provista por el componente SistemaRecepcion. Gestiona el cierre administrativo y financiero de la estancia, consolidando cargos, procesando pagos finales y liberando la habitación para limpieza.

Operación: obtenerEstadoCuenta

Firma:
----
obtenerEstadoCuenta(idEstancia: int): EstadoCuentaConsolidado
----

Pre-condiciones:

* La estancia identificada debe existir y estar activa (estado EN_CASA o CHECK_IN).
* No se debe haber ejecutado el cierre definitivo previamente.

Pos-condiciones:

* Se comunica con IEstanciaMgt para sumar todos los consumos registrados (minibar, restaurante, lavandería) hasta el momento exacto de la consulta.
* Retorna un EstadoCuentaConsolidado con el desglose matemático: (CargosAlojamiento + ConsumosExtras) - TotalPagadoPreviamente = SaldoPendiente.
* No altera datos, es una operación de consulta (idempotente).

---

Operación: procesarPagoFinal

Firma:
----
procesarPagoFinal(idEstancia: String, pago: DatosPago): ReciboPago
----

Pre-condiciones:

* Debe existir un saldoPendiente mayor a cero calculado en el paso anterior.
* Los DatosPago deben ser válidos y autorizados por IPagosMgt.

Pos-condiciones:

* Registra la transacción financiera vinculada a la estancia.
* Actualiza el acumulado de totalPagadoPreviamente.
* Retorna un ReciboPago donde el nuevoSaldoPendiente debería ser idealmente 0.00.

---

Operación: confirmarSalida

Firma:
----
confirmarSalida(idEstancia: String): ConfirmacionCierre
----

Pre-condiciones:

* Regla de Negocio Crítica: El saldoPendiente de la estancia debe ser estrictamente 0.00 (Política de "Saldo Cero").
* La llave de la habitación debe haber sido devuelta (validación física/operativa).

Pos-condiciones:

* Cambia el estado de la estancia a CHECK_OUT (Finalizada).
* En ICatalogoMgt, cambia el estado físico de la habitación asociada de OCUPADA a SUCIA (o POR_LIMPIAR), dejándola lista para el equipo de limpieza pero no disponible aún para venta inmediata.
* Genera la marca de tiempo oficial de salida en ConfirmacionCierre.

---

==== CU10-IRegistrarConsumosServicios
image::Interface diagrams/CU10-IRegistrarConsumosServicios.jpg[IRegistrarConsumosServicios, width=600, align=center]
Especificación de Interfaz: IRegistrarConsumosServicios

Descripción: Interfaz provista por el componente SistemaRecepcion. Permite imputar cargos adicionales (restaurante, minibar, lavandería, etc.) a la cuenta de una habitación ocupada, validando previamente la identidad del huésped.

Operación: buscarEstanciaPorHabitacion

Firma:
----
buscarEstanciaPorHabitacion(numeroHabitacion: String): ResumenCuenta
----

Pre-condiciones:

* El numeroHabitacion debe corresponder a una habitación física existente en el hotel.
* La habitación debe tener estado físico OCUPADA en el ICatalogoMgt.

Pos-condiciones:

* Consulta IEstanciaMgt para encontrar la estancia activa asociada a esa habitación.
* Si existe una estancia activa (EN_CASA), retorna un objeto ResumenCuenta con el nombre del titular y el saldo actual para verificación visual.
* Si la habitación está vacía o en mantenimiento, retorna nulo.

---

Operación: registrarCargoAdicional

Firma:
----
registrarCargoAdicional(idEstancia: int, detalle: DetalleCargo): ReciboCargo
----

Pre-condiciones:

* La estancia identificada por idEstancia debe estar en estado activo (EN_CASA).
* Los valores monetarios (precioUnitario) y numéricos (cantidad) deben ser positivos.
* El tipoServicio debe ser válido (ej. "Restaurante", "Minibar").

Pos-condiciones:

* Calcula el monto total del cargo (cantidad * precioUnitario).
* Registra el movimiento en el folio de la estancia a través de IEstanciaMgt.
* Actualiza el saldo pendiente de la cuenta del huésped.
* Retorna un ReciboCargo con el montoTotalCargo aplicado y el nuevoSaldoTotal acumulado.

---

==== CU11-IRealizarCambioHabitacion
image::Interface diagrams/CU11-IRealizarCambioHabitacion.jpg[IRealizarCambioHabitacion, width=600, align=center]
Especificación de Interfaz: IRealizarCambioHabitacion

Descripción: Interfaz provista por el componente SistemaReservas. Gestiona el traslado de un huésped de una habitación física a otra durante una estancia activa, manejando la actualización de inventario, estados de limpieza y ajustes de tarifas si aplica.

Operación: buscarDisponibilidadCambio

Firma:
----
buscarDisponibilidadCambio(idEstancia: int): HabitacionCandidata[]
----

Pre-condiciones:

* La estancia identificada debe estar activa (EN_CASA).
* No debe haber un proceso de Check-Out iniciado para esa estancia.

Pos-condiciones:

* Consulta en ICatalogoMgt las habitaciones físicas que estén actualmente VACIA y LIMPIA.
* Filtra las habitaciones disponibles para asegurar que no estén reservadas para entrar hoy por otro huésped.
* Retorna una lista de HabitacionCandidata con detalles de ubicación (piso, número) y estado.

---

Operación: cotizarDiferenciaCambio

Firma:
----
cotizarDiferenciaCambio(idEstancia: int, idNuevaHabitacion: int): ResumenCotizacion
----

Pre-condiciones:

* La idNuevaHabitacion debe ser una de las retornadas en la búsqueda anterior.

Pos-condiciones:

* Compara la tarifa de la categoría de la habitación actual vs. la nueva categoría (si son diferentes).
* Calcula el cargoAdicional prorrateado por las noches restantes de la estancia.
* Genera un tokenCotizacion temporal que bloquea la nueva habitación por un breve periodo.
* Determina el motivoCambio (si el precio es 0, puede ser un cambio operativo/mantenimiento; si es mayor a 0, es un upgrade).

---

Operación: ejecutarCambio

Firma:
----
ejecutarCambio(idEstancia: int, tokenCotizacion: String): ResultadosReasignacion
----

Pre-condiciones:

* El tokenCotizacion debe ser válido y no haber expirado.
* La habitación nueva debe seguir libre física y lógicamente.

Pos-condiciones:

* Actualiza la referencia de habitación en la entidad Estancia.
* En ICatalogoMgt:
** Marca la habitación anterior como SUCIA (requiere limpieza inmediata).
** Marca la habitación nueva como OCUPADA.
* Registra la fecha y hora exacta del movimiento en ResultadosReasignacion.
* Si hubo cargo económico, registra la transacción en la cuenta de la estancia.

---

==== CU12-IHacerReservaRecepcion
image::Interface diagrams/CU12-IHacerReservaRecepcion.jpg[IHacerReservaRecepcion, width=600, align=center]
Especificación de Interfaz: IHacerReservaRecepcion

Descripción: Interfaz provista por el componente SistemaRecepcion. Permite al personal de mostrador gestionar reservas para clientes que se presentan físicamente en el hotel ("Walk-in"), con capacidades extendidas para asignar habitaciones específicas o gestionar inventario en rotación (sucias/limpias).

Operación: buscarDisponibilidad

Firma:
----
buscarDisponibilidad(criterios: CriteriosBusqueda): OpcionDisponible[]
----

Pre-condiciones:

* fechaLlegada debe ser igual a la fecha actual (típico de Walk-in) o futura.
* cantidadPersonas debe ser mayor a 0.

Pos-condiciones:

* Consulta el inventario físico en ICatalogoMgt.
* Si incluirHabitacionesSucias == TRUE, considera disponibles aquellas habitaciones con estado físico SUCIA que no estén bloqueadas por mantenimiento (asumiendo que Housekeeping las liberará pronto).
* Retorna una lista de OpcionDisponible con la tarifa calculada al momento.
* Si no hay habitaciones (ni limpias ni sucias recuperables), retorna lista vacía.

---

Operación: crearReservaMostrador

Firma:
----
crearReservaMostrador(solicitud: SolicitudMostrador): ReciboReserva
----

Pre-condiciones:

* El idTipoHabitacionSeleccionada debe tener inventario físico disponible para las fechas.
* El montoCobrado debe cubrir total o parcialmente la estancia según las reglas del hotel para Walk-ins.
* Los datosHuesped deben ser completos y válidos.

Pos-condiciones:

* Crea la reserva directamente en estado CONFIRMADA.
* Realiza el cobro inmediato a través de la colaboración con IPagosMgt (efectivo o tarjeta presente).
* Bloquea una habitación física específica (numeroHabitacionPreasignada).
* Retorna un ReciboReserva que sirve como comprobante de pago inicial y asignación.

---

==== CU13-IModificarEstanciaHuesped
image::Interface diagrams/CU13-IModificarEstanciaHuesped.jpg[IModificarEstanciaHuesped, width=600, align=center]
Especificación de Interfaz: IModificarEstanciaHuesped

Descripción: Interfaz provista por el componente SistemaReservas. Permite alterar la fecha de salida de una estancia en curso (extensión o salida anticipada), verificando la disponibilidad de la habitación física actual y gestionando los ajustes tarifarios necesarios.

Operación: cotizarNuevaFechaSalida

Firma:
----
cotizarNuevaFechaSalida(idEstancia: int, nuevaFechaSalida: Date): CotizacionModificacion
----

Pre-condiciones:

* La estancia identificada debe estar activa (estado EN_CASA).
* La nuevaFechaSalida debe ser posterior a la fecha actual del sistema.
* La nueva fecha debe ser diferente a la fecha de salida original.

Pos-condiciones:

* Calcula los diasDiferencia (positivos si extiende, negativos si acorta).
* Verifica en ICatalogoMgt si la habitación física actual está disponible para los días extra (en caso de extensión).
* Si la habitación actual está comprometida con otra reserva futura:
** Marca requiereCambioHabitacion = TRUE.
** Verifica si hay otras habitaciones disponibles para proponer el cambio.
* Calcula el saldoAPagarDevolver basado en las tarifas vigentes para los nuevos días.
* Genera un tokenCotizacion temporal.

---

Operación: aplicarModificacionEstancia

Firma:
----
aplicarModificacionEstancia(tokenCotizacion: String): ConfirmacionCambioFecha
----

Pre-condiciones:

* El tokenCotizacion debe ser válido y no haber expirado.
* Si la operación implica un cargo extra, el pago debe haber sido procesado exitosamente.

Pos-condiciones:

* Actualiza la fecha de salida en la entidad Estancia.
* Actualiza el bloqueo de inventario en ICatalogoMgt:
** Si extendió: bloquea los días adicionales.
** Si acortó: libera los días remanentes para venta inmediata.
* Registra el ajuste financiero en la cuenta de la estancia.
* Retorna ConfirmacionCambioFecha con el nuevo estado del inventario.

---

==== CU14-IRegistrarTarifa
image::Interface diagrams/CU14-IRegistrarTarifa.jpg[IRegistrarTarifa, width=600, align=center]
Especificación de Interfaz: IRegistrarTarifa

Descripción: Interfaz provista por el componente SistemaTarifas. Herramienta administrativa para la gestión de ingresos (Revenue Management), permitiendo visualizar el calendario actual de precios y publicar nuevas tarifas garantizando la integridad referencial (sin solapamientos de fechas).

Operación: obtenerTarifasVigentes

Firma:
----
obtenerTarifasVigentes(filtro: CriterioTarifa): ResumenTarifa[]
----

Pre-condiciones:

* El idHotel debe existir en el sistema.
* El anioConsulta y mesConsulta deben formar una fecha válida.

Pos-condiciones:

* Consulta en ICatalogoMgt todas las tarifas activas para ese hotel y tipo de habitación en el periodo solicitado.
* Retorna una lista de ResumenTarifa ordenada cronológicamente para facilitar la visualización de "huecos" donde se pueden insertar nuevos precios.

---

Operación: validarSolapamiento

Firma:
----
validarSolapamiento(borrador: BorradorTarifa): InformeViabilidad
----

Pre-condiciones:

* fechaInicio debe ser anterior a fechaFin.
* precioBase debe ser mayor a cero.
* idTipoHabitacion debe ser válido.

Pos-condiciones:

* Verifica matemáticamente si el rango de fechas propuesto choca con alguna tarifa ya existente para ese mismo tipo de habitación.
* Si no hay choques: esPublicada (o esViable) = TRUE y tarifasConflictivas está vacío.
* Si hay choques: esPublicada = FALSE y devuelve la lista de tarifas que estorban en tarifasConflictivas.

---

Operación: publicarNuevaTarifa

Firma:
----
publicarNuevaTarifa(tarifaValidada: BorradorTarifa): ConfirmacionPublicacion
----

Pre-condiciones:

* La tarifa debe haber superado la validación de solapamiento previamente (o forzar la validación aquí mismo).
* El usuario (auditor) debe tener permisos de Administrador o Revenue Manager.

Pos-condiciones:

* Inserta el nuevo registro de tarifa en la base de datos a través de ICatalogoMgt.
* Genera un idTarifa único.
* Retorna ConfirmacionPublicacion con la fecha de alta y la firma del usuario responsable (auditoriaUsuario) para trazabilidad.

---

==== CU15-IDarBajaTarifa
image::Interface diagrams/CU15-IDarBajaTarifa.jpg[IDarBajaTarifa, width=600, align=center]
Especificación de Interfaz: IDarBajaTarifa

Descripción: Interfaz provista por el componente SistemaTarifas. Permite la eliminación lógica o desactivación de planes de precios, asegurando previamente que dicha acción no corrompa reservas existentes ni genere inconsistencias financieras.

Operación: buscarTarifasActivas

Firma:
----
buscarTarifasActivas(filtro: CriterioBaja): TarifaCandidata[]
----

Pre-condiciones:

* El usuario debe tener permisos de administración.
* El idHotel debe ser válido.

Pos-condiciones:

* Consulta ICatalogoMgt para encontrar tarifas cuya fecha de fin de vigencia sea futura o que estén marcadas como activas.
* Retorna una lista de TarifaCandidata con información resumen (precio, fechas) para que el usuario seleccione cuál desea eliminar.

---

Operación: analizarImpactoBaja

Firma:
----
analizarImpactoBaja(idTarifa: int): InformeImpacto
----

Pre-condiciones:

* El idTarifa debe existir en el sistema.

Pos-condiciones:

* Realiza una consulta cruzada con IReservaMgt: "¿Cuántas reservas futuras tienen asignada esta tarifa?".
* Si cantidadReservasAfectadas == 0:
** esSeguroEliminar = TRUE.
** advertenciaLegal indica "Eliminación segura".
* Si cantidadReservasAfectadas > 0:
** esSeguroEliminar = FALSE (o requiere confirmación especial).
** advertenciaLegal alerta sobre el riesgo de inconsistencia.
* Genera y retorna un tokenValidacion que firma digitalmente este análisis.

---

Operación: ejecutarBajaDefinitiva

Firma:
----
ejecutarBajaDefinitiva(idTarifa: int, tokenValidacion: String): ConfirmacionBaja
----

Pre-condiciones:

* El tokenValidacion debe coincidir con el generado en el análisis de impacto y no haber expirado.
* Si el análisis previo indicaba riesgo, el usuario debe haber aceptado explícitamente la advertencia (implícito en el uso del token).

Pos-condiciones:

* En ICatalogoMgt, cambia el estado de la tarifa a INACTIVA o ELIMINADA (Soft Delete).
* La tarifa deja de aparecer en búsquedas futuras de disponibilidad.
* Retorna ConfirmacionBaja con el nombre del usuario responsable para auditoría.

---

==== CU16-IActualizarTarifa
image::Interface diagrams/CU16-IActualizarTarifa.png[IActualizarTarifa, width=600, align=center]
Especificación de Interfaz: IActualizarTarifa

Descripción: Interfaz provista por el componente SistemaTarifas.
Permite la modificación de los valores, fechas de vigencia y condiciones de las tarifas existentes en el catálogo.

Operación: actualizarTarifa

Firma:
----
actualizarTarifa(tarifaModificada: DetalleTarifa): ConfirmacionActualizacion
----

Pre-condiciones:

* La tarifa a modificar debe existir en el sistema.
* Los nuevos valores de precio deben ser positivos.
* El rango de fechas no debe generar conflictos con otras tarifas si se modifican los periodos.

Pos-condiciones:

* Se actualizan los atributos de la tarifa en la base de datos (ICatalogoMgt).
* Se retorna una ConfirmacionActualizacion indicando el éxito de la operación.
---

==== CU17-IRegistrarPolitica
image::Interface diagrams/CU17-IRegistrarPolitica.png[IRegistrarPolitica, width=600, align=center]
Especificación de Interfaz: IRegistrarPolitica

Descripción: Interfaz provista por el componente SistemaPoliticas.
Permite a los administradores definir nuevas normativas operativas (cancelación, mascotas, check-in) que regirán las reservas y estancias.

Operación: registrarPolitica

Firma:
----
registrarPolitica(nuevaPolitica: Politica): ConfirmacionRegistro
----

Pre-condiciones:

* El nombre de la política no debe estar duplicado.
* La descripción debe ser clara y no vacía.

Pos-condiciones:

* Se crea una nueva entrada en el repositorio de políticas.
* La política queda en estado activo para ser consultada por otros módulos.
---

==== CU18-IActualizarPolitica
image::Interface diagrams/CU18-IActualizarPolitica.png[IActualizarPolitica, width=600, align=center]
Especificación de Interfaz: IActualizarPolitica

Descripción: Interfaz provista por el componente SistemaPoliticas.
Facilita la edición de las condiciones y descripciones de las políticas vigentes para adaptarse a cambios en la operación del hotel.

Operación: actualizarPolitica

Firma:
----
actualizarPolitica(politicaModificada: Politica): ConfirmacionActualizacion
----

Pre-condiciones:

* La política identificada debe existir.

Pos-condiciones:

* Se actualiza la definición de la política en el sistema.
* Los cambios se reflejan inmediatamente para las nuevas consultas, aunque pueden no afectar retroactivamente a contratos ya firmados (reservas pasadas).
---

==== CU19-IDarDeBajaPolitica
image::Interface diagrams/CU19-IDarDeBajaPolitica.png[IDarDeBajaPolitica, width=600, align=center]
Especificación de Interfaz: IDarDeBajaPolitica

Descripción: Interfaz provista por el componente SistemaPoliticas.
Permite desactivar o eliminar lógicamente una política que ya no aplica, asegurando que no sea seleccionable en el futuro.

Operación: darBajaPolitica

Firma:
----
darBajaPolitica(idPolitica: int): ConfirmacionBaja
----

Pre-condiciones:

* La política debe existir y estar activa.

Pos-condiciones:

* El estado de la política cambia a INACTIVA.
* Se mantiene el registro histórico para auditoría.
---

==== CU20-IRegistrarGerente
image::Interface diagrams/CU20-IRegistrarGerente.png[IRegistrarGerente, width=600, align=center]
Especificación de Interfaz: IRegistrarGerente

Descripción: Interfaz provista por el componente SistemaAdministracionPersonal.
Gestiona el alta de nuevos perfiles de nivel gerencial, asignándoles credenciales y asociándolos a un hotel específico.

Operación: registrarGerente

Firma:
----
registrarGerente(datosGerente: DatosPersonal, idHotel: String): ConfirmacionRegistro
----

Pre-condiciones:

* El correo electrónico no debe estar registrado previamente.
* El hotel asignado debe existir en el sistema.

Pos-condiciones:

* Se crea la cuenta de usuario con rol de GERENTE.
* Se establece la relación laboral con el hotel indicado.
---

==== CU21-IActualizarGerente
image::Interface diagrams/CU21-IActualizarGerente.png[IActualizarGerente, width=600, align=center]
Especificación de Interfaz: IActualizarGerente

Descripción: Interfaz provista por el componente SistemaAdministracionPersonal.
Permite modificar la información de contacto o asignación de los gerentes registrados.

Operación: actualizarGerente

Firma:
----
actualizarGerente(gerenteModificado: DatosPersonal): ConfirmacionActualizacion
----

Pre-condiciones:

* El gerente debe existir en el sistema.

Pos-condiciones:

* Se actualizan los datos personales y/o laborales en la base de datos.
---

==== CU22-IDarDeBajaGerente
image::Interface diagrams/CU22-IDarDeBajaGerente.png[IDarDeBajaGerente, width=600, align=center]
Especificación de Interfaz: IDarDeBajaGerente

Descripción: Interfaz provista por el componente SistemaAdministracionPersonal.
Revoca el acceso al sistema de un gerente, inhabilitando su cuenta por cese de funciones o cambio de rol.

Operación: darBajaGerente

Firma:
----
darBajaGerente(idGerente: int): ConfirmacionBaja
----

Pre-condiciones:

* El gerente debe estar activo.

Pos-condiciones:

* El estado del usuario cambia a INACTIVO.
* Se revocan los permisos de acceso al módulo de gestión.
---

==== CU23-IConsultarGerente
image::Interface diagrams/CU23-IConsultarGerente.png[IConsultarGerente, width=600, align=center]
Especificación de Interfaz: IConsultarGerente

Descripción: Interfaz provista por el componente SistemaAdministracionPersonal.
Permite visualizar la ficha completa de un gerente, incluyendo su historial y hotel asignado.

Operación: consultarGerente

Firma:
----
consultarGerente(idGerente: int): DetalleGerente
----

Pre-condiciones:

* El ID proporcionado debe ser válido.

Pos-condiciones:

* Retorna un objeto DetalleGerente con toda la información registrada.
---

==== CU24-IRegistrarHotel
image::Interface diagrams/CU24-IRegistrarGerente.png[IRegistrarHotel, width=600, align=center]
Especificación de Interfaz: IRegistrarHotel

Descripción: Interfaz provista por el componente SistemaInventario.
Permite dar de alta una nueva propiedad hotelera en la cadena, definiendo sus datos generales y configuración inicial.

Operación: registrarHotel

Firma:
----
registrarHotel(nuevoHotel: DatosHotel): ConfirmacionRegistro
----

Pre-condiciones:

* La dirección y nombre del hotel deben ser únicos.

Pos-condiciones:

* Se crea el registro del hotel en el catálogo global.
* El hotel queda listo para la configuración de habitaciones (aunque aún no tenga inventario).
---

==== CU25-IActualizarHotel
image::Interface diagrams/CU25-IActualizarGerente.png[IActualizarHotel, width=600, align=center]
Especificación de Interfaz: IActualizarHotel

Descripción: Interfaz provista por el componente SistemaInventario.
Permite modificar la información descriptiva, ubicación o servicios de un hotel existente.

Operación: actualizarHotel

Firma:
----
actualizarHotel(hotelModificado: DatosHotel): ConfirmacionActualizacion
----

Pre-condiciones:

* El hotel debe existir en el sistema.

Pos-condiciones:

* La información pública del hotel se actualiza para los canales de venta.
---

==== CU26-IDarDeBajaHotel
image::Interface diagrams/CU26-IDarDeBajaHotel.png[IDarDeBajaHotel, width=600, align=center]
Especificación de Interfaz: IDarDeBajaHotel

Descripción: Interfaz provista por el componente SistemaInventario.
Retira un hotel de la oferta comercial de la cadena, usualmente por cierre o venta de la propiedad.

Operación: darBajaHotel

Firma:
----
darBajaHotel(idHotel: String): ConfirmacionBaja
----

Pre-condiciones:

* El hotel no debe tener reservas activas o futuras pendientes de ejecución (Validación estricta).

Pos-condiciones:

* El estado del hotel pasa a INACTIVO.
* Se bloquea la creación de nuevas habitaciones o reservas para dicha propiedad.
---

==== CU27-IConsultarHotel
image::Interface diagrams/CU27-IConsultarHotel.png[IConsultarHotel, width=600, align=center]
Especificación de Interfaz: IConsultarHotel

Descripción: Interfaz provista por el componente SistemaInventario.
Provee acceso a la información detallada de configuración de un hotel específico.

Operación: consultarHotel

Firma:
----
consultarHotel(idHotel: String): DetalleHotel
----

Pre-condiciones:

* El ID del hotel debe ser válido.

Pos-condiciones:

* Retorna la información completa del hotel, incluyendo resumen de inventario y personal asignado.
---

==== CU28-IRegistrarTipoHabitacion
image::Interface diagrams/CU28-IRegistrarTipoHabitacion.png[IRegistrarTipoHabitacion, width=600, align=center]
Especificación de Interfaz: IRegistrarTipoHabitacion

Descripción: Interfaz provista por el componente SistemaInventario.
Define una nueva categoría de habitación (ej. "Doble", "Suite", "Sencilla") con sus características base y capacidad.

Operación: registrarTipoHabitacion

Firma:
----
registrarTipoHabitacion(nuevoTipo: DatosTipoHabitacion): ConfirmacionRegistro
----

Pre-condiciones:

* El nombre del tipo de habitación no debe duplicarse dentro del mismo hotel.
* La capacidad (personas) debe ser mayor a 0.

Pos-condiciones:

* Se añade el nuevo tipo de habitación al catálogo del hotel.
* Se habilita la posibilidad de asignar tarifas a este tipo.
---

==== CU29-IActualizarTipoHabitacion
image::Interface diagrams/CU29-IActualizarTipoHabitacion.png[IActualizarTipoHabitacion, width=600, align=center]
Especificación de Interfaz: IActualizarTipoHabitacion

Descripción: Interfaz provista por el componente SistemaInventario.
Permite modificar las características descriptivas o de capacidad de una categoría de habitación.

Operación: actualizarTipoHabitacion

Firma:
----
actualizarTipoHabitacion(tipoModificado: DatosTipoHabitacion): ConfirmacionActualizacion
----

Pre-condiciones:

* El tipo de habitación debe existir.

Pos-condiciones:

* Se actualizan los datos en el catálogo.
* Los cambios se reflejan en la información mostrada a los huéspedes en futuras búsquedas.
---

==== CU30-DarDeBajaTipoHabitacion
image::Interface diagrams/CU30-DarDeBajaTipoHabitacion.png[DarDeBajaTipoHabitacion, width=600, align=center]
Especificación de Interfaz: IDarDeBajaTipoHabitacion

Descripción: Interfaz provista por el componente SistemaInventario.
Elimina una categoría de habitación del catálogo comercial, impidiendo que se vendan nuevas unidades de este tipo.

Operación: darBajaTipoHabitacion

Firma:
----
darBajaTipoHabitacion(idTipoHabitacion: String): ConfirmacionBaja
----

Pre-condiciones:

* No deben existir reservas futuras para este tipo de habitación.
* No deben existir habitaciones físicas activas asociadas a este tipo (deben reasignarse o darse de baja primero).

Pos-condiciones:

* El tipo de habitación se marca como ELIMINADO o DESCONTINUADO.
---

==== CU31-IConsultarTipoHabitacion
image::Interface diagrams/CU31-IConsultarTipoHabitacion.png[IConsultarTipoHabitacion, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaInventario. Permite obtener la información detallada de una categoría de habitación específica del catálogo.

Operación: consultarTipoHabitacion

Firma:
----
consultarTipoHabitacion(idTipoHabitacion: int): DetalleTipoHabitacion
----

Precondiciones:
* Existe al menos un tipo de habitación registrado en el sistema.

Postcondiciones:
* El sistema muestra la información completa del tipo de habitación.
---

==== CU32-IConsultarBitacoraTransacciones
image::Interface diagrams/CU32-IConsultarBitacoraTransacciones.png[IConsultarBitacoraTransacciones, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaReservas. Permite recuperar el registro de eventos y movimientos realizados en el sistema filtrados por fecha y tipo de evento.

Operación: consultarBitacora

Firma:
----
consultarBitacora(fecha: Date, tipo: string): DetalleBitacora
----

Precondiciones:
* Existen transacciones registradas en el sistema.

Postcondiciones:
* El sistema muestra en pantalla las transacciones que cumplen con los criterios de búsqueda seleccionados.
---


==== CU33-IRastrearHistorialReservacion
image::Interface diagrams/CU33-IRastrearHistorialReservacion.png[IRastrearHistorialReservacion, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaReservas. Permite visualizar el ciclo de vida completo de una reserva, incluyendo creación, pagos y modificaciones.

Operación: rastrearHistorialReserva

Firma:
----
rastrearHistorialReserva(idReserva: int): DetalleReserva
----

Precondiciones:
* Existe al menos una reserva registrada en el sistema.

Postcondiciones:
* El sistema muestra en pantalla el historial completo del ciclo de vida de la reservación seleccionada.
---


==== CU34-IGenerarReporteTrazabilidadTarifas
image::Interface diagrams/CU34-IGenerarReporteTrazabilidadTarifas.png[IGenerarReporteTrazabilidadTarifas, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaTarifas. Genera un reporte detallado sobre la tarifa aplicada a una reserva específica, asegurando la transparencia en el precio cobrado.

Operación: generarReporteTarifas

Firma:
----
generarReporteTarifas(idReserva: int): Reporte
----

Precondiciones:
* Existen transacciones de reservaciones registradas en el sistema con tarifas y políticas asociadas.

Postcondiciones:
* El sistema muestra en pantalla el reporte de trazabilidad de tarifas y políticas de overbooking según los criterios seleccionados.
---


==== CU35-IRegistrarHabitacion
image::Interface diagrams/CU35-IRegistrarHabitacion.png[IRegistrarHabitacion, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaInventario. Permite dar de alta una nueva unidad física de habitación vinculándola a un hotel y a un tipo de habitación existente.

Operación: registrarHabitacion

Firma:
----
registrarHabitacion(idHotel: int, idTipoHabitacion: int): ConfirmacionRegistro
----

Precondiciones:
* Existe al menos un tipo de habitación registrado en el sistema.
* Existe al menos un hotel registrado en el sistema.

Postcondiciones:
* Se registra la nueva habitación en la base de datos, asociada al hotel correspondiente.
---


==== CU36-IActualizarHabitacion
image::Interface diagrams/CU36-IActualizarHabitacion.png[IActualizarHabitacion, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaInventario. Permite modificar los datos técnicos o de ubicación de una habitación física ya registrada en el catálogo.

Operación: actualizarHabitacion

Firma:
----
actualizarHabitacion(idHabitacion: int): ConfirmacionActualizacion
----

Precondiciones:
* Existe al menos una habitación registrada en el sistema.

Postcondiciones:
* La información de la habitación seleccionada se actualiza correctamente en la base de datos.
---


==== CU37-IDarDeBajaHabitacion
image::Interface diagrams/CU37-IDarDeBajaHabitacion.png[IDarDeBajaHabitacion, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaInventario. Elimina de forma lógica una habitación física del inventario disponible para la venta.

Operación: DarDeBajaHabitacion

Firma:
----
DarDeBajaHabitacio(idHabitacion: int): ConfirmacionBaja
----

Precondiciones:
* Existe al menos una habitación registrada en el sistema.

Postcondiciones:
* Se actualiza el estado de la habitación en la base de datos.
---


==== CU38-IConsultarHabitacion
image::Interface diagrams/CU38-IConsultarHabitacion.png[IConsultarHabitacion, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaInventario. Recupera los detalles específicos y el estado actual de una habitación física determinada.

Operación: consultarHabitacion

Firma:
----
consultarHabitacion(idHabitacion: int): DetalleHabitacion
----

Precondiciones:
* Existe al menos una habitación registrada en el sistema.

Postcondiciones:
* El sistema muestra la información completa de la habitación seleccionada.
---


==== CU39-IBloquearHabitacion
image::Interface diagrams/CU39-IBloquearHabitacion.png[IBloquearHabitacion, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaInventario. Permite restringir la disponibilidad de una habitación para la venta por motivos de mantenimiento o administrativos.

Operación: bloquearHabitacion

Firma:
----
bloquearHabitacion(idHabitacion: int, motivo: Motivo): ConfirmacionBloqueo
----

Precondiciones:
* Existe al menos una habitación registrada en el sistema.

Postcondiciones:
* Se actualiza el estado de disponibilidad de la HABITACIÓN en la base de datos.
---


==== CU40-IRegistrarRecepcionista
image::Interface diagrams/CU40-IRegistrarRecepcionista.png[IRegistrarRecepcionista, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaAdministracionPersonal. Permite crear una nueva cuenta de usuario con rol de recepcionista para operar en un hotel específico.

Operación: registrarRecepcionista

Firma:
----
registrarRecepcionista(nuevoRecepcionista: DatosRecepcionista): ConfirmacionRegistro
----

Precondiciones:
* El gerente ha iniciado sesión en el sistema y tiene un HOTEL asignado.

Postcondiciones:
* Se registra el nuevo recepcionista en la base de datos, asociado al hotel correspondiente.
---


==== CU41-IActualizarRecepcionista
image::Interface diagrams/CU41-IActualizarRecepcionista.png[IActualizarRecepcionista, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaAdministracionPersonal. Permite modificar la información personal de un recepcionista registrado.

Operación: actualizarRecepcionista

Firma:
----
actualizarRecepcionista(idRecepcionista: int):
ConfirmacionActualizacion
----

Precondiciones:
* Existe al menos un RECEPCIONISTA registrado en el sistema del HOTEL.

Postcondiciones
* Se actualiza la información del RECEPCIONISTA en la base de datos.
---


==== CU42-IConsultarRecepcionista
image::Interface diagrams/CU42-IConsultarReceçionista.png[IConsultarRecepcionista, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaAdministracionPersonal. Permite consultar el perfil y los datos de contacto de un recepcionista en el sistema.

Operación: consultarRecepcionista

Firma:
----
consultarRecepcionista(idRecepcionista: int): DetalleRecepcionista
----

Precondiciones:
* Existe al menos un recepcionista registrado en el sistema.

Postcondiciones:
* El sistema muestra la información del recepcionista seleccionado.
---


==== CU43-IDarDeBajaRecepcionista
image::Interface diagrams/CU43-IDarDeBajaRecepcionista.png[IDarDeBajaRecepcionista, width=600, align=center]

Descripción: Interfaz provista por el componente SistemaAdministracionPersonal. Desactiva el acceso y elimina el registro de un recepcionista de la nómina de usuarios activos.

Operación: darDeBajaRecepcionista

Firma:
----
darDeBajaRecepcionista(idRecepcionista: int): ConfirmacionBaja
----

Precondiciones:
* Existe al menos un recepcionista registrado en el sistema del hotel.

Postcondiciones
* Se actualiza el estado del recepionista en la base de datos.
---


=== Interfaces de Negocio

==== ICatalogoMgt
image::Interface diagrams/business interfaces/ICatalogoMgt.png[ICatalogoMgt, width=600, align=center]
Especificación de Interfaz: ICatalogoMgt

Descripción: Interfaz provista por el componente SistemaInventario.
Centraliza la gestión integral del inventario (hoteles, habitaciones, tipos), la configuración comercial (tarifas) y el control de disponibilidad física y lógica.

Operación: verificarDisponibilidad
Firma:
----
verificarDisponibilidad(criterios: CriterioBusqueda): ResultadoDisponibilidad
----
Pre-condiciones: Rango de fechas válido y hotel activo.
Pos-condiciones: Retorna mapa de disponibilidad por tipo de habitación.

Operación: bloquearInventario
Firma:
----
bloquearInventario(idTipoHabitacion: String, fechas: RangoFechas, cantidad: int): TokenBloqueo
----
Pre-condiciones: Disponibilidad suficiente verificada.
Pos-condiciones: Decrementa cupo disponible temporalmente.

Operación: liberarInventario
Firma:
----
liberarInventario(tokenBloqueo: String): Confirmacion
----
Pre-condiciones: Token válido.
Pos-condiciones: Restituye el cupo al inventario general.

Operación: actualizarEstadoHabitacion
Firma:
----
actualizarEstadoHabitacion(numeroHabitacion: String, nuevoEstado: EstadoFisico): Confirmacion
----
Pre-condiciones: Habitación existente.
Pos-condiciones: Cambia estado (LIMPIA/SUCIA/MANTENIMIENTO).

Operación: registrarHotel
Firma:
----
registrarHotel(datos: DatosHotel): ConfirmacionRegistro
----
Pre-condiciones: Nombre y dirección únicos.
Pos-condiciones: Crea nuevo registro de hotel.

Operación: actualizarHotel
Firma:
----
actualizarHotel(datos: DatosHotel): ConfirmacionActualizacion
----
Pos-condiciones: Actualiza datos descriptivos del hotel.

Operación: darBajaHotel
Firma:
----
darBajaHotel(idHotel: String): ConfirmacionBaja
----
Pre-condiciones: Sin reservas activas.
Pos-condiciones: Marca hotel como inactivo.

Operación: registrarTipoHabitacion
Firma:
----
registrarTipoHabitacion(datos: DatosTipoHabitacion): ConfirmacionRegistro
----
Pos-condiciones: Crea nueva categoría en el hotel.

Operación: actualizarTipoHabitacion
Firma:
----
actualizarTipoHabitacion(datos: DatosTipoHabitacion): ConfirmacionActualizacion
----
Pos-condiciones: Modifica capacidad o descripción.

Operación: registrarHabitacion
Firma:
----
registrarHabitacion(datos: DatosHabitacion): ConfirmacionRegistro
----
Pos-condiciones: Da de alta una unidad física (número de puerta).

Operación: registrarTarifa
Firma:
----
registrarTarifa(datos: DatosTarifa): ConfirmacionRegistro
----
Pre-condiciones: No solapamiento de fechas.
Pos-condiciones: Publica nuevo precio.

Operación: actualizarTarifa
Firma:
----
actualizarTarifa(datos: DatosTarifa): ConfirmacionActualizacion
----
Pos-condiciones: Modifica valores de tarifa existente.

Operación: darBajaTarifa
Firma:
----
darBajaTarifa(idTarifa: int): ConfirmacionBaja
----
Pre-condiciones: Análisis de impacto validado.
Pos-condiciones: Desactiva tarifa.

Operación: obtenerTarifasVigentes
Firma:
----
obtenerTarifasVigentes(filtro: CriterioTarifa): ListaTarifas
----
Pos-condiciones: Retorna tarifas activas para el periodo.

---

==== IReservaMgt
image::Interface diagrams/business interfaces/IReservaMgt.png[IReservaMgt, width=600, align=center]
Especificación de Interfaz: IReservaMgt

Descripción: Interfaz provista por el componente SistemaReservas.
Administra el ciclo de vida de las reservas, modificaciones, cancelaciones y la trazabilidad histórica.

Operación: crearReserva
Firma:
----
crearReserva(solicitud: DatosReserva): ResumenReserva
----
Pre-condiciones: Inventario bloqueado y cliente válido.
Pos-condiciones: Genera reserva en estado PENDIENTE.

Operación: confirmarReserva
Firma:
----
confirmarReserva(idReserva: int, infoPago: InfoPago): ComprobanteReserva
----
Pre-condiciones: Pago autorizado.
Pos-condiciones: Cambia estado a CONFIRMADA.

Operación: cancelarReserva
Firma:
----
cancelarReserva(idReserva: int, motivo: String): ReciboCancelacion
----
Pos-condiciones: Cambia estado a CANCELADA.

Operación: modificarReserva
Firma:
----
modificarReserva(idReserva: int, cambios: SolicitudCambio): ResumenCambio
----
Pos-condiciones: Actualiza fechas o tipo de habitación.

Operación: buscarReservas
Firma:
----
buscarReservas(filtro: CriterioBusquedaReserva): ListaReservas
----
Pos-condiciones: Retorna colección filtrada.

Operación: obtenerHistorialReserva
Firma:
----
obtenerHistorialReserva(idReserva: int): HistorialEventos
----
Pos-condiciones: Retorna bitácora de cambios de estado.

Operación: analizarImpactoBajaTarifa
Firma:
----
analizarImpactoBajaTarifa(idTarifa: int): InformeImpacto
----
Pos-condiciones: Retorna lista de reservas afectadas por eliminación de tarifa.

Operación: cotizarModificacion
Firma:
----
cotizarModificacion(idReserva: int, cambios: SolicitudCambio): Cotizacion
----
Pos-condiciones: Calcula diferencias de precio sin aplicar cambios.

---

==== IPagosMgt
image::Interface diagrams/business interfaces/IPagosMgt.png[IPagosMgt, width=600, align=center]
Especificación de Interfaz: IPagosMgt

Descripción: Interfaz provista por el componente SistemaPagos.
Fachada para la gestión de cobros, reembolsos y validación de instrumentos financieros.

Operación: procesarPago
Firma:
----
procesarPago(datosPago: InfoTransaccion): ResultadoPago
----
Pre-condiciones: Datos financieros válidos.
Pos-condiciones: Ejecuta cargo y retorna autorización.

Operación: procesarReembolso
Firma:
----
procesarReembolso(idTransaccionOriginal: String, monto: decimal): ConfirmacionReembolso
----
Pre-condiciones: Transacción original aprobada.
Pos-condiciones: Devuelve fondos al cliente.

Operación: obtenerEstadoTransaccion
Firma:
----
obtenerEstadoTransaccion(idTransaccion: String): EstadoTransaccion
----
Pos-condiciones: Retorna estado actual (APROBADO/RECHAZADO/PENDIENTE).

Operación: validarMetodoPago
Firma:
----
validarMetodoPago(metodo: MetodoPago): ResultadoValidacion
----
Pos-condiciones: Verifica vigencia y formato de tarjeta/cuenta.

---

==== IEstanciaMgt
image::Interface diagrams/business interfaces/IEstanciaMgt.png[IEstanciaMgt, width=600, align=center]
Especificación de Interfaz: IEstanciaMgt

Descripción: Interfaz provista por el componente SistemaRecepcion.
Controla las operaciones durante la permanencia del huésped: Check-in, cargos a la habitación, cambios y Check-out.

Operación: iniciarEstancia
Firma:
----
iniciarEstancia(idReserva: int, asignaciones: List<AsignacionHabitacion>): IdEstancia
----
Pre-condiciones: Reserva confirmada, fecha correcta.
Pos-condiciones: Registra Check-in.

Operación: finalizarEstancia
Firma:
----
finalizarEstancia(idEstancia: int): ResumenCierre
----
Pre-condiciones: Saldo cero.
Pos-condiciones: Registra Check-out y libera habitación.

Operación: registrarConsumo
Firma:
----
registrarConsumo(idEstancia: int, consumo: DetalleConsumo): ReciboCargo
----
Pre-condiciones: Estancia activa.
Pos-condiciones: Suma cargo a la cuenta.

Operación: obtenerEstadoCuenta
Firma:
----
obtenerEstadoCuenta(idEstancia: int): EstadoCuenta
----
Pos-condiciones: Retorna desglose de cargos y abonos.

Operación: cambiarHabitacion
Firma:
----
cambiarHabitacion(idEstancia: int, nuevaHabitacion: String): ConfirmacionCambio
----
Pos-condiciones: Actualiza asignación física.

Operación: buscarEstanciaPorHabitacion
Firma:
----
buscarEstanciaPorHabitacion(numero: String): ResumenEstancia
----
Pos-condiciones: Retorna estancia activa si existe.

---

==== IClienteMgt
image::Interface diagrams/business interfaces/IClienteMgt.png[IClienteMgt, width=600, align=center]
Especificación de Interfaz: IClienteMgt

Descripción: Interfaz provista por el componente SistemaGestionClientes.
Administra la información de usuarios, huéspedes y personal (en roles de cliente).

Operación: registrarCliente
Firma:
----
registrarCliente(datos: DatosCliente): ConfirmacionRegistro
----
Pos-condiciones: Crea perfil de usuario.

Operación: actualizarCliente
Firma:
----
actualizarCliente(datos: DatosCliente): ConfirmacionActualizacion
----
Pos-condiciones: Modifica datos de contacto o preferencias.

Operación: obtenerCliente
Firma:
----
obtenerCliente(idUsuario: int): PerfilCliente
----
Pos-condiciones: Retorna información completa del usuario.

Operación: buscarClientes
Firma:
----
buscarClientes(filtro: CriterioCliente): ListaClientes
----
Pos-condiciones: Retorna lista de clientes coincidentes.

Operación: validarCredenciales
Firma:
----
validarCredenciales(usuario: String, pass: String): TokenSesion
----
Pos-condiciones: Autentica al usuario en el sistema.



